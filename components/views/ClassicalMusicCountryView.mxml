<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx" xmlns:views="components.views.*">
	<fx:Script>
		<![CDATA[
			import components.skins.CountryViewPanelSkin;
			
			import mx.collections.XMLListCollection;
			import mx.controls.Image;
			import mx.events.FlexEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			[Bindable]
			private var musicians:XMLListCollection;
			
			protected function countryViewGroup_creationCompleteHandler(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				queryClassicalMusicians.send();
				
			}
			
			protected function queryClassicalMusicians_resultHandler(event:ResultEvent):void
			{
				// TODO Auto-generated method stub
				musicians = new XMLListCollection(event.result.musician);
				
				for each (var m:XML in musicians) {
					var musician:Object = Object(m);
					trace(musician.name, musician.nation);
					
					var panel:CountryViewPanel = new CountryViewPanel();
					//countryViewGroup.addElement()
					panel.source = Object("assets/pics/" + musician.nation +".png");
					panel.title = musician.name;
					panel.setStyle("skinClass", Class(components.skins.CountryViewPanelSkin));
					panel.width = this.width;
					panel.setStyle("backgroundAlpha", "0.5");
					//				panel.backgroundAlpha="0.5";
					countryViewGroup.addElement(panel);
					var image:MusicianImage = new MusicianImage();
					image.source = Object("assets/pics/" + musician.name +".jpg");
					panel.addElement(image);
				}
			}
			
			protected function queryClassicalMusicians_faultHandler(event:FaultEvent):void
			{
				// TODO Auto-generated method stub
				
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<s:HTTPService id="queryClassicalMusicians"
					   url="http://127.0.0.1/ClassicalFireworks/assets/configs/ClassicalMusicians.xml"
					   resultFormat="e4x" result="queryClassicalMusicians_resultHandler(event)"
					   fault="queryClassicalMusicians_faultHandler(event)">
			
		</s:HTTPService>
	</fx:Declarations>
	
	<s:Scroller width="100%" height="100%">
		<s:VGroup id="countryViewGroup" width="100%" height="100%"
				  creationComplete="countryViewGroup_creationCompleteHandler(event)">
			<!--
			<views:CountryViewPanel source="@Embed('assets/pics/GER.png')" title="Germany"
			skinClass="components.skins.CountryViewPanelSkin" width="100%" backgroundAlpha="0.5">
			</views:CountryViewPanel>
			<views:CountryViewPanel source="@Embed('assets/pics/AUT.png')" title="Austria"
			skinClass="components.skins.CountryViewPanelSkin" width="100%" backgroundAlpha="0.5">
			</views:CountryViewPanel>
			<views:CountryViewPanel source="@Embed('assets/pics/ITA.png')" title="Italy"
			skinClass="components.skins.CountryViewPanelSkin" width="100%" backgroundAlpha="0.5">
			</views:CountryViewPanel>
			<views:CountryViewPanel source="@Embed('assets/pics/POL.png')" title="Poland"
			skinClass="components.skins.CountryViewPanelSkin" width="100%" backgroundAlpha="0.5">
			</views:CountryViewPanel>
			
			<views:CountryViewPanel source="@Embed('assets/pics/RUS.png')" title="Russia"
			skinClass="components.skins.CountryViewPanelSkin" width="100%" backgroundAlpha="0.5">
			</views:CountryViewPanel>
			<views:CountryViewPanel source="@Embed('assets/pics/FIN.png')" title="Finland"
			skinClass="components.skins.CountryViewPanelSkin" width="100%" backgroundAlpha="0.5">
			</views:CountryViewPanel>
			-->
		</s:VGroup>
	</s:Scroller>
	
</s:VGroup>
